2024-05-16 22:47:10.451 +03:00 [WRN] The WebRootPath was not found: C:\Users\AsusTufLord\Documents\GitHub\university-processing\src\UniversityProcessing.API\wwwroot. Static files may be unavailable.
2024-05-16 22:47:11.324 +03:00 [INF] Database prepearing
2024-05-16 22:47:11.327 +03:00 [INF] Migrating database...
2024-05-16 22:47:12.541 +03:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-05-16 22:47:12.553 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "name" = '__EFMigrationsHistory' AND "type" = 'table';
2024-05-16 22:47:12.570 +03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "migration_id", "product_version"
FROM "__EFMigrationsHistory"
ORDER BY "migration_id";
2024-05-16 22:47:12.600 +03:00 [INF] No migrations were applied. The database is already up to date.
2024-05-16 22:47:12.874 +03:00 [INF] User profile is available. Using 'C:\Users\AsusTufLord\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-05-16 22:47:13.116 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "universities" AS "u")
2024-05-16 22:47:13.122 +03:00 [INF] Database migrated successfully
2024-05-16 22:47:13.123 +03:00 [INF] Launching UniversityProcessing.API...
2024-05-16 22:47:13.526 +03:00 [WRN] The WebRootPath was not found: C:\Users\AsusTufLord\Documents\GitHub\university-processing\src\UniversityProcessing.API\wwwroot. Static files may be unavailable.
2024-05-16 22:47:13.578 +03:00 [INF] Now listening on: http://localhost:5158
2024-05-16 22:47:13.581 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-05-16 22:47:13.583 +03:00 [INF] Hosting environment: Development
2024-05-16 22:47:13.584 +03:00 [INF] Content root path: C:\Users\AsusTufLord\Documents\GitHub\university-processing\src\UniversityProcessing.API
2024-05-16 22:47:17.590 +03:00 [INF] No SPA development server running at https://localhost:5173 found.
2024-05-16 22:47:23.027 +03:00 [INF] SPA development server running at 'https://localhost:5173'
2024-05-16 22:51:56.617 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5158/ - null null
2024-05-16 22:51:56.644 +03:00 [INF] SPA proxy is ready. Redirecting to https://localhost:5173.
2024-05-16 22:51:56.695 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5158/ - 302 0 null 82.0064ms
2024-05-16 22:52:39.790 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5158/ - null null
2024-05-16 22:52:39.810 +03:00 [INF] SPA proxy is ready. Redirecting to https://localhost:5173.
2024-05-16 22:52:39.812 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5158/ - 302 0 null 22.1344ms
2024-05-16 23:56:46.438 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5158/swagger/index.html - null null
2024-05-16 23:56:46.478 +03:00 [WRN] Failed to determine the https port for redirect.
2024-05-16 23:56:46.767 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5158/swagger/index.html - 200 null text/html;charset=utf-8 329.1317ms
2024-05-16 23:56:46.939 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5158/swagger/v1/swagger.json - null null
2024-05-16 23:56:47.147 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5158/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 207.8205ms
2024-05-16 23:57:01.217 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5158/api/v1/Identity/Login - application/json 50
2024-05-16 23:57:01.229 +03:00 [INF] CORS policy execution successful.
2024-05-16 23:57:01.235 +03:00 [INF] Executing endpoint 'UniversityProcessing.API.Controllers.IdentityController.Login (UniversityProcessing.API)'
2024-05-16 23:57:01.260 +03:00 [INF] Route matched with {action = "Login", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[UniversityProcessing.Abstractions.Http.Identity.LoginResponseDto] Login(UniversityProcessing.Abstractions.Http.Identity.LoginRequestDto, System.Threading.CancellationToken) on controller UniversityProcessing.API.Controllers.IdentityController (UniversityProcessing.API).
2024-05-16 23:57:01.415 +03:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedUserName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."id", "u"."access_failed_count", "u"."approved", "u"."birthday", "u"."concurrency_stamp", "u"."created_at", "u"."department_id", "u"."email", "u"."email_confirmed", "u"."faculty_id", "u"."first_name", "u"."group_id", "u"."last_name", "u"."lockout_enabled", "u"."lockout_end", "u"."middle_name", "u"."normalized_email", "u"."normalized_user_name", "u"."password_hash", "u"."phone_number", "u"."phone_number_confirmed", "u"."security_stamp", "u"."two_factor_enabled", "u"."university_id", "u"."university_position_id", "u"."user_name", "u"."user_role_id"
FROM "users" AS "u"
WHERE "u"."normalized_user_name" = @__normalizedUserName_0
LIMIT 1
2024-05-16 23:57:01.837 +03:00 [INF] Executed action UniversityProcessing.API.Controllers.IdentityController.Login (UniversityProcessing.API) in 567.9507ms
2024-05-16 23:57:01.844 +03:00 [INF] Executed endpoint 'UniversityProcessing.API.Controllers.IdentityController.Login (UniversityProcessing.API)'
2024-05-16 23:57:01.847 +03:00 [ERR] An unhandled exception has occurred while executing the request.
UniversityProcessing.GenericSubdomain.Exceptions.NotFoundException: User with username = string not found
   at UniversityProcessing.DomainServices.Features.Identity.Login.LoginCommandHandler.Handle(LoginCommandRequest request, CancellationToken cancellationToken) in C:\Users\AsusTufLord\Documents\GitHub\university-processing\src\UniversityProcessing.DomainServices\Features\Identity\Login\LoginCommandRequestHandler.cs:line 19
   at UniversityProcessing.API.Controllers.IdentityController.Login(LoginRequestDto request, CancellationToken cancellationToken) in C:\Users\AsusTufLord\Documents\GitHub\university-processing\src\UniversityProcessing.API\Controllers\IdentityController.cs:line 24
   at lambda_method17(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-16 23:57:01.930 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5158/api/v1/Identity/Login - 500 null text/plain; charset=utf-8 713.0964ms
2024-05-16 23:58:49.913 +03:00 [INF] Request starting HTTP/1.1 POST http://localhost:5158/api/v1/Identity/Login - application/json 50
2024-05-16 23:58:54.123 +03:00 [INF] CORS policy execution successful.
2024-05-16 23:58:54.124 +03:00 [INF] Executing endpoint 'UniversityProcessing.API.Controllers.IdentityController.Login (UniversityProcessing.API)'
2024-05-16 23:58:54.125 +03:00 [INF] Route matched with {action = "Login", controller = "Identity"}. Executing controller action with signature System.Threading.Tasks.Task`1[UniversityProcessing.Abstractions.Http.Identity.LoginResponseDto] Login(UniversityProcessing.Abstractions.Http.Identity.LoginRequestDto, System.Threading.CancellationToken) on controller UniversityProcessing.API.Controllers.IdentityController (UniversityProcessing.API).
2024-05-16 23:58:54.145 +03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 6)], CommandType='"Text"', CommandTimeout='30']
SELECT "u"."id", "u"."access_failed_count", "u"."approved", "u"."birthday", "u"."concurrency_stamp", "u"."created_at", "u"."department_id", "u"."email", "u"."email_confirmed", "u"."faculty_id", "u"."first_name", "u"."group_id", "u"."last_name", "u"."lockout_enabled", "u"."lockout_end", "u"."middle_name", "u"."normalized_email", "u"."normalized_user_name", "u"."password_hash", "u"."phone_number", "u"."phone_number_confirmed", "u"."security_stamp", "u"."two_factor_enabled", "u"."university_id", "u"."university_position_id", "u"."user_name", "u"."user_role_id"
FROM "users" AS "u"
WHERE "u"."normalized_user_name" = @__normalizedUserName_0
LIMIT 1
2024-05-16 23:58:54.208 +03:00 [INF] Executed action UniversityProcessing.API.Controllers.IdentityController.Login (UniversityProcessing.API) in 80.1645ms
2024-05-16 23:58:54.210 +03:00 [INF] Executed endpoint 'UniversityProcessing.API.Controllers.IdentityController.Login (UniversityProcessing.API)'
2024-05-16 23:58:54.211 +03:00 [ERR] An unhandled exception has occurred while executing the request.
UniversityProcessing.GenericSubdomain.Exceptions.NotFoundException: User with username = string not found
   at UniversityProcessing.DomainServices.Features.Identity.Login.LoginCommandHandler.Handle(LoginCommandRequest request, CancellationToken cancellationToken) in C:\Users\AsusTufLord\Documents\GitHub\university-processing\src\UniversityProcessing.DomainServices\Features\Identity\Login\LoginCommandRequestHandler.cs:line 19
   at UniversityProcessing.API.Controllers.IdentityController.Login(LoginRequestDto request, CancellationToken cancellationToken) in C:\Users\AsusTufLord\Documents\GitHub\university-processing\src\UniversityProcessing.API\Controllers\IdentityController.cs:line 24
   at lambda_method17(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-05-16 23:59:02.800 +03:00 [INF] Request finished HTTP/1.1 POST http://localhost:5158/api/v1/Identity/Login - 500 null text/plain; charset=utf-8 12890.8485ms
